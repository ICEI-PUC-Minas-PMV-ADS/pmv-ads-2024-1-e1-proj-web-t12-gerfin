<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="stylesheet" href="style.css">
  <script defer src="script.js"></script>
  <title>Leevi</title>
</head>
<body>
  <main>
    <div class="left">
      <div class="wrapper">
        <div class="card">
          <h1>Cadastro</h1>
          <button onclick="location.href = '../login/index.html'">Retornar a página de login</button>
          <form id="form">
            <label for="nome">
              <input type="text" id="nome" name="nome" placeholder="Nome" class="input required" oninput="nameValidate()">
              <span class="span-required">Usuario deve conter no mínimo 3 caracteres</span>
            </label>

            <label for="email">
              <input type="text" id="email" name="email" placeholder="Digite seu email" class="input required" oninput="emailValidate()">
              <span class="span-required">Digite um Email válido</span>
            </label>

            <label for="senha">
              <input type="password" id="senha" name="senha" placeholder="Senha" class="input required" oninput="mainPasswordValidate()">
              <span class="span-required">Digite uma senha com no mínimo 8 letras</span>
            </label>

            <label for="confirmarSenha">
              <input type="password" id="confirmar senha" name="confirmar senha" placeholder="Confirme sua Senha" class="input required" oninput="comparePassword()">
              <span class="span-required">Senhas devem ser compatíveis</span>
            </label>

              <input type="submit" value="Cadastrar">
          </form>
        </div>
      </div>
    </div>
  </div>
    <div class="right">
      <h1>Leevi</h1>
        <div class="imagess">   
          <div class="wrapper">
            <div class="card">
              <div class="icon">
                <img src="../images/dicacadastro.svg" alt="Icone 1">
              </div>
            <p>Praticidade e simplicidade a cada passo</p>
          </div>       
        </div>
      </div>
    </div>
    </div>
  </main>
</body>
<script>
  const form   = document.getElementById('form');
  const campos = document.querySelectorAll('.required');
  const spans  = document.querySelectorAll('.span-required');
  const emailRegex = /^\w+([-+.']\w+)*@\w+([-.]\w+)*\.\w+([-.]\w+)*$/;

form.addEventListener('submit', (event) => {
  event.preventDefault();
  nameValidate();
  emailValidate();
  mainPasswordValidate();
  comparePassword();

})

function setError(index){
  campos[index].style.border = '2px solid #e63636';
  spans[index].style.display = 'block';
}

function removeError(index){
  campos[index].style.border = '';
  spans[index].style.display = 'none';
}

function nameValidate(){
if(campos[0].value.length < 3)
{
  setError (0);
}
else
{
  removeError(0);
}     
}

function emailValidate(){
if(!emailRegex.test(campos[1].value))
{
  setError(1);
}
else
{
  removeError(1);
}     
}

function mainPasswordValidate(){
if(campos[2].value.length < 8)
{
  setError(2);
}
else
{
  removeError(2);
  comparePassword();
}     
  
}

function comparePassword(){
if(campos[2].value == campos[3].value && campos [3].value.length >= 8)
{
  removeError(3);
}
else
{
  setError(3);
}     
}
</script>
</html>